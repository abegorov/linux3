# Первые шаги с Ansible

## Задание

Подготовить стенд на **Vagrant** как минимум с одним сервером. На этом сервере используя **Ansible** необходимо развернуть **nginx** со следующими условиями:

- необходимо использовать модуль **yum/apt**;
- конфигурационные файлы должны быть взяты из шаблона **jinja2** с перемененными;
- после установки **nginx** должен быть в режиме **enabled** в **systemd**;
- должен быть использован **notify** для старта **nginx** после установки;
- сайт должен слушать на нестандартном порту - 8080, для этого использовать переменные в **Ansible**.

## Реализация

1. С помощью **Vagrant** поднимается виртуальная машина с **CentOS Stream 9**.
2. В **Vagrantfile** добавлен стандартный **provisioner** для запуска **Ansible playbook** в файле **playbook.yml**.
3. **playbook.yml** запускает роль **nginx**.
4. Роль ставит **nginx** (через модуль **dnf**), конфигурирует его и добавляет правило в **firewalld**.
5. Порт **nginx** указан в **host_vars/nginx.yml** и подставляется через **jinja2** в конфигурацию **nginx** и **firewalld**.

## Запуск

Достаточно сделать **vagrant up**, сайт будет доступен по адресу [http://127.0.0.1:8080](http://127.0.0.1:8080). Настройки проброса портов можно поменять в **Vagrantfile**. Протестировано с:

- Vagrant 2.3.7
- Ansible 2.16.8
- Python 3.11.9
- Jinja 3.1.4
